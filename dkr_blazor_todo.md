# DKR Management System - Blazor Entwicklungs-Roadmap

## üèóÔ∏è Phase 1: Hybrid-Architektur Setup (Woche 1-2)

### 1.1 Deployment-Agnostisches Blazor Projekt
- [ ] .NET 8 Blazor Server Projekt mit Hybrid-Support erstellen
- [ ] Solution Structure f√ºr Cloud + On-Premise:
  - `DKR.Web` (Blazor Server UI - deployment-agnostic)
  - `DKR.Core` (Domain Models & Business Logic) 
  - `DKR.Infrastructure` (Abstraction Layer f√ºr Storage/Identity)
  - `DKR.Infrastructure.Cloud` (Azure/AWS Services)
  - `DKR.Infrastructure.OnPremise` (Local Services)
  - `DKR.Shared` (DTOs, Enums, Constants)
  - `DKR.Deployment` (Docker, Helm Charts, ARM Templates)
- [ ] NuGet Packages f√ºr Hybrid-Deployment:
  - `Microsoft.EntityFrameworkCore.SqlServer` (On-Premise)
  - `Microsoft.EntityFrameworkCore.Cosmos` (Cloud Option)
  - `Azure.Storage.Blobs` (Cloud Files)
  - `Microsoft.Extensions.Hosting` (Background Services)
  - `Docker.DotNet` (Container Management)
  - `AutoMapper`, `FluentValidation`, `Serilog.AspNetCore`

### 1.2 Hybrid Database & Storage Abstraction
- [ ] IRepository Pattern f√ºr Database-Abstraktion:
  - `IClientRepository`, `ISessionRepository`, `IInventoryRepository`
  - SQL Server Implementation (On-Premise)
  - Azure SQL / Cosmos DB Implementation (Cloud)
- [ ] IFileStorage Abstraction:
  - `LocalFileStorage` f√ºr On-Premise
  - `AzureBlobStorage` f√ºr Cloud
  - `AWSS3Storage` f√ºr AWS Cloud
- [ ] Entity Models mit Hybrid-Support:
  - `Client` (UUID, Tenant-ID, Encryption-ready)
  - `Session` (Multi-tenant, Cloud/Local timestamps)
  - `EmergencyEvent` (Notification abstraction)
  - `InventoryItem` (Multi-location tracking)
  - `HarmReductionService` (Location-agnostic)
  - `User` (Identity abstraction, 2FA)
  - `AuditLog` (WORM-compatible, Blockchain-ready)
  - `Tenant` (Cloud Multi-tenancy + On-Premise single tenant)
- [ ] Configuration-driven DbContext:
  ```csharp
  public class HybridDbContext : DbContext
  {
      protected override void OnConfiguring(DbContextOptionsBuilder options)
      {
          var deploymentMode = Configuration["Deployment:Mode"];
          if (deploymentMode == "Cloud")
              options.UseSqlServer(cloudConnectionString);
          else
              options.UseSqlServer(localConnectionString);
      }
  }
  ```

### 1.3 Hybrid Authentication & Identity
- [ ] IIdentityProvider Abstraction:
  - `LocalIdentityProvider` (ASP.NET Core Identity)
  - `AzureADProvider` (Azure AD B2C)
  - `AWSCognitoProvider` (AWS Cognito)
- [ ] Multi-Tenant User Model:
  ```csharp
  public class ApplicationUser : IdentityUser
  {
      public string TenantId { get; set; }  // For Cloud Multi-tenancy
      public string FacilityId { get; set; } // For On-Premise
      public DeploymentMode Mode { get; set; }
  }
  ```
- [ ] Rollenbasierte Autorisierung (deployment-agnostic):
  - `Administrator`, `Fachkraft`, `Sozialarbeiter`, `ReadOnly`
  - `TenantAdmin` (nur Cloud), `SystemAdmin` (nur On-Premise)
- [ ] 2FA Abstraction:
  - Local TOTP (On-Premise)
  - Azure AD MFA (Cloud)
  - SMS/Email Fallback (beide)
- [ ] JWT Token Handling:
  - Cloud: Azure AD Tokens
  - On-Premise: Local JWT mit Custom Claims

## üß© Phase 2: Core Components & Services (Woche 3-4)

### 2.1 Blazor Layout & Navigation
- [ ] MainLayout mit Sidebar-Navigation
- [ ] Responsive Header mit User-Info
- [ ] NavMenu Component mit rollenbasierter Sichtbarkeit
- [ ] Breadcrumb Navigation
- [ ] Loading States & Progress Indicators
- [ ] Toast Notification System

### 2.2 Client Management System
- [ ] `ClientService` f√ºr CRUD-Operationen
- [ ] UUID-Generator (KL-YYYY-NNNN Format)
- [ ] Dublettencheck Algorithm
- [ ] `ClientListComponent` mit Filterung/Sortierung
- [ ] `ClientDetailComponent` f√ºr Check-in
- [ ] KDS 3.0 Mapping & Validation
- [ ] GDPR-konforme Archivierung nach 10 Jahren

### 2.3 Session Management
- [ ] `SessionService` mit Real-time Updates
- [ ] `SessionTimerComponent` (SignalR f√ºr Live-Updates)
- [ ] Session State Machine (Wartend ‚Üí Aktiv ‚Üí Beendet)
- [ ] Maximum Session Duration Enforcement (30 Min)
- [ ] Multi-Room Management
- [ ] Automatic Cleanup bei Timeout

### 2.4 Barcode/QR-Code Integration
- [ ] `BarcodeReaderComponent` mit WebAssembly
- [ ] Camera Access f√ºr Mobile Devices
- [ ] QR-Code Generator f√ºr Client-IDs
- [ ] NFC-Tag Support (Mobile)
- [ ] Fallback: Manuelle Eingabe

## üö® Phase 3: Emergency & Compliance (Woche 5-6)

### 3.1 Notfall-System
- [ ] `EmergencyComponent` mit One-Click-Alert
- [ ] ICD-10 Code Mapping
- [ ] Automatic Notifications:
  - E-Mail an Beh√∂rden
  - SMS an Rettungsdienst
  - WhatsApp an Leitungsteam
- [ ] Eskalationsmatrix konfigurierbar
- [ ] Naloxon-Verabreichung Protokoll

### 3.2 Audit Trail & WORM Logging
- [ ] `AuditService` mit unver√§nderlichen Logs
- [ ] Blockchain-basierte Integrit√§t (Hash-Chain)
- [ ] Tamper-evident Storage
- [ ] Export-Funktionen f√ºr Compliance
- [ ] GDPR Article 32 Compliance

### 3.3 Security Features
- [ ] TLS 1.3 Enforcement
- [ ] AES-256 Field-Level Encryption
- [ ] Input Validation & Sanitization
- [ ] Rate Limiting & DDoS Protection
- [ ] Security Headers (HSTS, CSP, etc.)
- [ ] Penetration Test Integration Points

## üìä Phase 4: Reporting & Export (Woche 7-8)

### 4.1 KDS 3.0 Export Engine
- [ ] `KDSExportService` mit XML-Generierung
- [ ] Automatische Validierung gegen KDS-Schema
- [ ] Batch Processing f√ºr gro√üe Datenmengen
- [ ] Quartal/Jahr-Export-Automation
- [ ] Deutsche Suchthilfestatistik Integration

### 4.2 TDI 3.0 EMCDDA Integration
- [ ] `TDIExportService` f√ºr European Drug Report
- [ ] REITOX Focal Point API Integration
- [ ] CSV/JSON Format Support
- [ ] Automatic HTTPS Upload
- [ ] Retry Logic & Error Handling

### 4.3 Dashboard & Analytics
- [ ] Real-time KPI Dashboard (SignalR)
- [ ] Chart.js Integration f√ºr Visualisierungen
- [ ] Custom Report Builder
- [ ] PDF Report Generation
- [ ] Substanz-Trend-Analyse
- [ ] Pr√§ventions-Erfolgs-Metriken

## ü©∫ Phase 5: Harm Reduction Module (Woche 9-10)

### 5.1 Terminverwaltung
- [ ] `AppointmentService` f√ºr HIV/HCV-Tests
- [ ] Calendar Integration (iCal, Google Calendar)
- [ ] Push Notification System:
  - Web Push API
  - Mobile App Notifications
  - SMS/E-Mail Fallback
- [ ] Reminder Automation (24h, 2h vor Termin)

### 5.2 Medizinische Services
- [ ] Wundversorgung-Dokumentation
- [ ] Venenberatung-Protokolle
- [ ] Substitutions-Software-Integration (PSS)
- [ ] Test-Ergebnis-Management
- [ ] Nachsorge-Workflows

### 5.3 Inventory Management
- [ ] `InventoryService` mit Chargen-Tracking
- [ ] Automatic Reorder Points
- [ ] Ablaufdatum-Monitoring
- [ ] FIFO/FEFO Logic Implementation
- [ ] Supplier Integration (EDI/API)
- [ ] Kostenstellen-Zuordnung

## üì± Phase 6: Mobile & Offline (Woche 11-12)

### 6.1 Blazor Hybrid Mobile App
- [ ] .NET MAUI Blazor Hybrid Project
- [ ] Shared Razor Components zwischen Web/Mobile
- [ ] SQLite f√ºr Offline-Storage
- [ ] Background Sync Service
- [ ] Conflict Resolution Algorithm

### 6.2 Offline-First Architecture
- [ ] Service Worker f√ºr PWA
- [ ] IndexedDB f√ºr Browser-Storage
- [ ] Delta Sync Implementation
- [ ] Network Detection & Queuing
- [ ] Optimistic UI Updates

### 6.3 Tablet Integration
- [ ] Touch-optimierte UI Components
- [ ] Gesture Support
- [ ] Barcode Scanner Integration
- [ ] Multiple Device Sync
- [ ] Cross-Device Session Handover

## üîó Phase 7: API & Interoperability (Woche 13-14)

### 7.1 REST API Development
- [ ] ASP.NET Core Web API Project
- [ ] OpenAPI/Swagger Documentation
- [ ] Versioning Strategy (Header-based)
- [ ] Rate Limiting & Throttling
- [ ] API Key Management

### 7.2 FHIR R4 Integration
- [ ] FHIR Server Implementation (Firely)
- [ ] Patient Resource Mapping
- [ ] Observation Resource f√ºr Konsumvorg√§nge
- [ ] Condition Resource f√ºr Diagnosen
- [ ] Bundle Creation f√ºr Exports

### 7.3 HL7 Integration
- [ ] HL7 v2.x Message Processing
- [ ] ADT (Admission/Discharge/Transfer) Messages
- [ ] Hospital System Integration (KIS)
- [ ] MLLP Protocol Implementation
- [ ] Message Routing & Transformation

## üåç Phase 8: Multi-Tenancy & Internationalization (Woche 15-16)

### 8.1 Multi-Tenant Architecture (Cloud)
- [ ] Tenant Resolution Strategy:
  ```csharp
  public class TenantMiddleware
  {
      public async Task InvokeAsync(HttpContext context)
      {
          // Subdomain: hamburg.dkr-system.com
          var tenant = ExtractTenantFromSubdomain(context.Request.Host);
          
          // Header: X-Tenant-ID (f√ºr API calls)
          if (string.IsNullOrEmpty(tenant))
              tenant = context.Request.Headers["X-Tenant-ID"];
              
          context.Items["TenantId"] = tenant;
      }
  }
  ```
- [ ] **Database Strategies:**
  - **Option A:** Database per Tenant (h√∂chste Isolation)
  - **Option B:** Shared Database + Tenant-ID (kosteneffizienter)
  - **Option C:** Hybrid (kritische Daten getrennt)
- [ ] **Tenant Configuration Management:**
  ```csharp
  public class TenantConfiguration
  {
      public string TenantId { get; set; }
      public string Name { get; set; }
      public string[] AllowedDomains { get; set; }
      public Dictionary<string, object> Features { get; set; }
      public LocalizationSettings Localization { get; set; }
      public ComplianceSettings Compliance { get; set; }
  }
  ```
- [ ] **Data Isolation & Security:**
  ```csharp
  // Global Query Filter f√ºr automatische Tenant-Isolation
  builder.Entity<Client>()
      .HasQueryFilter(c => c.TenantId == _tenantService.GetCurrentTenant());
  ```
- [ ] **Custom Branding per Tenant:**
  - Logo Upload & Management
  - CSS Theme Customization
  - White-Label Options

### 8.2 Single-Tenant Architecture (On-Premise)
- [ ] **Facility-based Organization:**
  ```csharp
  public class Facility
  {
      public string Id { get; set; }
      public string Name { get; set; }
      public string Address { get; set; }
      public string LicenseNumber { get; set; }
      public FacilityType Type { get; set; } // DKR, Substitution, Combined
      public int Capacity { get; set; }
  }
  ```
- [ ] **Local Configuration:**
  - Single facility setup
  - Local user management
  - On-premise backup strategies
  - Local compliance reporting

### 8.3 Internationalization (Both Deployments)
- [ ] **Resource Files f√ºr 9 Sprachen:**
  ```
  Resources/
  ‚îú‚îÄ‚îÄ DKR.de.resx          # Deutsch (Standard)
  ‚îú‚îÄ‚îÄ DKR.en.resx          # English
  ‚îú‚îÄ‚îÄ DKR.fr.resx          # Fran√ßais  
  ‚îú‚îÄ‚îÄ DKR.es.resx          # Espa√±ol
  ‚îú‚îÄ‚îÄ DKR.it.resx          # Italiano
  ‚îú‚îÄ‚îÄ DKR.nl.resx          # Nederlands
  ‚îú‚îÄ‚îÄ DKR.pt.resx          # Portugu√™s
  ‚îú‚îÄ‚îÄ DKR.pl.resx          # Polski
  ‚îî‚îÄ‚îÄ DKR.cs.resx          # ƒåe≈°tina
  ```
- [ ] **Culture-specific Features:**
  ```csharp
  public class LocalizationService
  {
      public string FormatCurrency(decimal amount, string culture)
      {
          return culture switch
          {
              "de-DE" => amount.ToString("C", new CultureInfo("de-DE")), // ‚Ç¨
              "en-GB" => amount.ToString("C", new CultureInfo("en-GB")), // ¬£
              "ch-CH" => amount.ToString("C", new CultureInfo("de-CH")), // CHF
              _ => amount.ToString("C", CultureInfo.CurrentCulture)
          };
      }
  }
  ```
- [ ] **Country-specific Compliance:**
  ```csharp
  public class ComplianceRules
  {
      public static Dictionary<string, ComplianceSettings> CountryRules = new()
      {
          ["DE"] = new() { DataRetention = TimeSpan.FromDays(3653), RequiredFields = ["Gender", "BirthYear"] },
          ["AT"] = new() { DataRetention = TimeSpan.FromDays(3653), RequiredFields = ["Gender", "BirthYear"] },
          ["CH"] = new() { DataRetention = TimeSpan.FromDays(3653), RequiredFields = ["Gender", "Region"] },
          ["NL"] = new() { DataRetention = TimeSpan.FromDays(2555), RequiredFields = ["Gender", "PostalCode"] }
      };
  }
  ```

## üì¶ Phase 11: Deployment & DevOps (Woche 19-20)

### 11.1 Container-based Deployment
- [ ] Multi-Stage Dockerfile f√ºr Hybrid-Deployment:
  ```dockerfile
  # Build stage
  FROM mcr.microsoft.com/dotnet/sdk:8.0 AS build
  
  # Cloud runtime
  FROM mcr.microsoft.com/dotnet/aspnet:8.0 AS cloud-runtime
  ENV DEPLOYMENT_MODE=Cloud
  
  # On-Premise runtime  
  FROM mcr.microsoft.com/dotnet/aspnet:8.0 AS onpremise-runtime
  ENV DEPLOYMENT_MODE=OnPremise
  ```
- [ ] Docker Compose f√ºr On-Premise:
  - Blazor App Container
  - SQL Server Container
  - Redis Container
  - Reverse Proxy (nginx/Traefik)
- [ ] Kubernetes Manifests f√ºr Cloud:
  - Deployment, Service, Ingress
  - ConfigMaps f√ºr Environment-spezifische Settings
  - Secrets f√ºr Connection Strings

### 11.2 Cloud Deployment (Azure & AWS)
- [ ] **Azure Deployment:**
  - ARM/Bicep Templates
  - Azure App Service f√ºr Blazor
  - Azure SQL Database
  - Azure Blob Storage
  - Azure Key Vault f√ºr Secrets
  - Application Insights
- [ ] **AWS Deployment:**
  - CloudFormation Templates
  - AWS ECS/Fargate f√ºr Container
  - AWS RDS f√ºr Database
  - AWS S3 f√ºr File Storage
  - AWS Secrets Manager
  - CloudWatch Monitoring
- [ ] Multi-Region Setup:
  - EU-West (Frankfurt) - DACH Region
  - EU-Central (Amsterdam) - BeNeLux
  - EU-South (Madrid) - Iberia

### 11.3 On-Premise Deployment
- [ ] **Installer Package:**
  - Windows MSI Installer
  - Linux .deb/.rpm Packages
  - macOS .pkg Installer
- [ ] **Automated Setup Script:**
  ```powershell
  # Windows PowerShell
  Install-DKRSystem -Mode OnPremise -DatabaseServer localhost
  ```
  ```bash
  # Linux Bash
  curl -sSL https://install.dkr-system.com | bash -s -- --mode=onpremise
  ```
- [ ] **Configuration Wizard:**
  - Web-based Setup (Port 8080)
  - Database Connection Testing
  - SSL Certificate Configuration
  - Initial Admin User Creation
- [ ] **System Requirements Check:**
  - .NET 8 Runtime
  - SQL Server 2019+ / PostgreSQL 13+
  - Minimum Hardware Specifications
  - Network Port Requirements

### 11.4 Hybrid Configuration Management
- [ ] **Environment Detection:**
  ```csharp
  public enum DeploymentMode 
  { 
      Cloud, 
      OnPremise, 
      Hybrid 
  }
  
  public class DeploymentService : IDeploymentService
  {
      public DeploymentMode DetectMode()
      {
          // Auto-detect based on environment variables
          if (Environment.GetEnvironmentVariable("AZURE_CLIENT_ID") != null)
              return DeploymentMode.Cloud;
          return DeploymentMode.OnPremise;
      }
  }
  ```
- [ ] **Dynamic Service Registration:**
  ```csharp
  public void ConfigureServices(IServiceCollection services)
  {
      var mode = services.GetRequiredService<IDeploymentService>().DetectMode();
      
      switch (mode)
      {
          case DeploymentMode.Cloud:
              services.AddScoped<IFileStorage, AzureBlobStorage>();
              services.AddScoped<IIdentityProvider, AzureADProvider>();
              services.AddScoped<INotificationService, AzureServiceBus>();
              break;
          case DeploymentMode.OnPremise:
              services.AddScoped<IFileStorage, LocalFileStorage>();
              services.AddScoped<IIdentityProvider, LocalIdentityProvider>();
              services.AddScoped<INotificationService, SMTPNotificationService>();
              break;
      }
  }
  ```
- [ ] **Feature Toggles per Deployment:**
  ```json
  {
    "Features": {
      "Cloud": {
        "MultiTenant": true,
        "AutoScaling": true,
        "GlobalSearch": true
      },
      "OnPremise": {
        "MultiTenant": false,
        "AdvancedSecurity": true,
        "LocalBackup": true
      }
    }
  }
  ```

## üß™ Phase 10: Testing & Quality Assurance (Woche 19-20)

### 10.1 Unit Testing
- [ ] xUnit Test Project Setup
- [ ] Repository Pattern Testing
- [ ] Service Layer Unit Tests
- [ ] Mock Dependencies (Moq)
- [ ] Code Coverage Analysis

### 10.2 Integration Testing
- [ ] TestServer f√ºr API Testing
- [ ] Database Integration Tests
- [ ] External API Mocking
- [ ] End-to-End Scenarios
- [ ] Performance Testing

### 10.3 Security Testing
- [ ] OWASP ZAP Integration
- [ ] Dependency Vulnerability Scanning
- [ ] Penetration Testing Automation
- [ ] Compliance Testing (GDPR, ISO 27001)

---

## üìã Technische Spezifikationen f√ºr Claude Code

### Hybrid-Specific Development Environment Setup
```bash
# .NET 8 SDK Installation
dotnet --version  # Should be 8.0+

# Hybrid Project Creation Commands
dotnet new blazorserver -n DKR.Web
dotnet new classlib -n DKR.Core
dotnet new classlib -n DKR.Infrastructure
dotnet new classlib -n DKR.Infrastructure.Cloud
dotnet new classlib -n DKR.Infrastructure.OnPremise
dotnet new classlib -n DKR.Shared
dotnet new classlib -n DKR.Deployment

# Solution Setup
dotnet new sln -n DKRSystem
dotnet sln add **/*.csproj
```

### Key NuGet Packages for Hybrid Architecture
```xml
<!-- Shared Packages -->
<PackageReference Include="Microsoft.EntityFrameworkCore" Version="8.0.0" />
<PackageReference Include="Microsoft.AspNetCore.SignalR" Version="8.0.0" />
<PackageReference Include="AutoMapper.Extensions.Microsoft.DependencyInjection" Version="12.0.0" />
<PackageReference Include="FluentValidation.AspNetCore" Version="11.3.0" />
<PackageReference Include="Serilog.AspNetCore" Version="8.0.0" />

<!-- Cloud-Specific -->
<PackageReference Include="Microsoft.EntityFrameworkCore.Cosmos" Version="8.0.0" />
<PackageReference Include="Azure.Storage.Blobs" Version="12.19.1" />
<PackageReference Include="Azure.Identity" Version="1.10.4" />
<PackageReference Include="Microsoft.Graph" Version="5.42.0" />

<!-- On-Premise Specific -->
<PackageReference Include="Microsoft.EntityFrameworkCore.SqlServer" Version="8.0.0" />
<PackageReference Include="Microsoft.EntityFrameworkCore.Sqlite" Version="8.0.0" />
<PackageReference Include="StackExchange.Redis" Version="2.6.122" />
<PackageReference Include="Microsoft.AspNetCore.Identity.EntityFrameworkCore" Version="8.0.0" />
```

### Hybrid Connection String Templates
```json
{
  "ConnectionStrings": {
    "Cloud": {
      "Primary": "Server=tcp:dkr-eu-west.database.windows.net;Database=DKR_{TenantId};Authentication=Active Directory Default;Encrypt=true;",
      "CosmosDB": "AccountEndpoint=https://dkr-cosmos.documents.azure.com:443/;AccountKey={Key};"
    },
    "OnPremise": {
      "SqlServer": "Server=(localdb)\\mssqllocaldb;Database=DKRSystem;Trusted_Connection=true;MultipleActiveResultSets=true;Encrypt=true;TrustServerCertificate=true",
      "PostgreSQL": "Host=localhost;Database=dkr_system;Username=dkr_user;Password={Password}",
      "SQLite": "Data Source=dkr_system.db"
    }
  },
  "Deployment": {
    "Mode": "Auto", // Auto, Cloud, OnPremise
    "TenantMode": "Auto", // Single, Multi
    "Region": "EU-West"
  }
}
```

### Hybrid Folder Structure
```
DKRSystem/
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ DKR.Web/                    # Blazor Server UI (Deployment-agnostic)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Components/             # Reusable UI Components
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Pages/                 # Blazor Pages
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Services/              # UI Services
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Middleware/            # Tenant Resolution, etc.
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ wwwroot/               # Static Files
‚îÇ   ‚îú‚îÄ‚îÄ DKR.Core/                  # Domain Logic (Pure .NET)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Entities/              # Entity Models
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Services/              # Business Services  
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Interfaces/            # Abstraction Contracts
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Enums/                 # Enumerations
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ValueObjects/          # DDD Value Objects
‚îÇ   ‚îú‚îÄ‚îÄ DKR.Infrastructure/        # Shared Infrastructure
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Abstractions/          # IFileStorage, IIdentityProvider
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Data/                  # Base DbContext, Repositories
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Services/              # Cross-cutting Services
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ Extensions/            # DI Extensions
‚îÇ   ‚îú‚îÄ‚îÄ DKR.Infrastructure.Cloud/  # Cloud-specific Services
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Azure/                 # Azure implementations
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ AWS/                   # AWS implementations  
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Storage/               # Blob Storage, etc.
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ Identity/              # Cloud Identity Providers
‚îÇ   ‚îú‚îÄ‚îÄ DKR.Infrastructure.OnPremise/ # On-Premise Services
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Storage/               # Local File Storage
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Identity/              # Local Identity
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Backup/                # Local Backup Services
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ Monitoring/            # Local Health Checks
‚îÇ   ‚îú‚îÄ‚îÄ DKR.Shared/                # Common DTOs & Models
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ DTOs/                  # Data Transfer Objects
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Constants/             # System Constants
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Enums/                 # Shared Enumerations
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ Extensions/            # Extension Methods
‚îÇ   ‚îî‚îÄ‚îÄ DKR.Deployment/            # Deployment Artifacts
‚îÇ       ‚îú‚îÄ‚îÄ Docker/                # Dockerfiles
‚îÇ       ‚îú‚îÄ‚îÄ Kubernetes/            # K8s Manifests
‚îÇ       ‚îú‚îÄ‚îÄ Azure/                 # ARM/Bicep Templates
‚îÇ       ‚îú‚îÄ‚îÄ AWS/                   # CloudFormation
‚îÇ       ‚îî‚îÄ‚îÄ OnPremise/             # Installers, Scripts
‚îú‚îÄ‚îÄ tests/
‚îÇ   ‚îú‚îÄ‚îÄ DKR.UnitTests/
‚îÇ   ‚îú‚îÄ‚îÄ DKR.IntegrationTests/
‚îÇ   ‚îú‚îÄ‚îÄ DKR.Cloud.Tests/           # Cloud-specific Tests
‚îÇ   ‚îú‚îÄ‚îÄ DKR.OnPremise.Tests/       # On-Premise Tests
‚îÇ   ‚îî‚îÄ‚îÄ DKR.PerformanceTests/
‚îî‚îÄ‚îÄ docs/
    ‚îú‚îÄ‚îÄ Deployment/                # Deployment Guides
    ‚îÇ   ‚îú‚îÄ‚îÄ Cloud-Setup.md
    ‚îÇ   ‚îú‚îÄ‚îÄ OnPremise-Setup.md
    ‚îÇ   ‚îî‚îÄ‚îÄ Hybrid-Migration.md
    ‚îú‚îÄ‚îÄ Architecture/              # System Design
    ‚îî‚îÄ‚îÄ Compliance/                # GDPR, KDS, TDI Docs
```

### Hybrid-Specific Implementation Priority
1. **Abstraction Layer First** (Woche 1-2)
   - Interface definitions f√ºr alle Services
   - Dependency Injection Setup
   - Configuration Management

2. **Core Business Logic** (Woche 3-4)  
   - Domain Models (deployment-agnostic)
   - Business Services (keine Infrastructure-Dependencies)

3. **Dual Infrastructure Implementation** (Woche 5-8)
   - Cloud Services (Azure/AWS)
   - On-Premise Services (Local)
   - Feature Parity Testing

4. **Deployment Automation** (Woche 9-10)
   - Container Orchestration
   - CI/CD f√ºr beide Modi
   - Migration Tools

5. **Advanced Features** (Woche 11+)
   - Multi-tenancy (Cloud)
   - Enterprise Features (On-Premise)
   - Hybrid Scenarios (Data Sync, etc.)

---

## üéØ Hybrid-Specific Definition of Done

Jedes Feature ist erst "Done" wenn:
- [ ] **Cloud Implementation** funktioniert (Azure + AWS)
- [ ] **On-Premise Implementation** funktioniert (Windows + Linux)
- [ ] **Abstraction Interface** definiert und implementiert
- [ ] **Configuration Switch** zwischen Modi funktioniert
- [ ] **Unit Tests** f√ºr beide Deployment-Modi
- [ ] **Integration Tests** Cloud und On-Premise getrennt
- [ ] **Docker Container** l√§uft in beiden Modi
- [ ] **Documentation** f√ºr beide Deployment-Optionen
- [ ] **Migration Path** zwischen Cloud ‚Üî On-Premise definiert
- [ ] **Performance** in beiden Modi gemessen (<2s Response Time)
- [ ] **Security Review** f√ºr Cloud + On-Premise bestanden
- [ ] **Compliance** GDPR/KDS/TDI f√ºr beide Modi validiert

---

**Diese Hybrid-Roadmap ist Claude Code ready f√ºr internationale Skalierung!** üåçüöÄ

## üíº **Business Model Hybrid-Support:**

**Cloud SaaS (B2B):**
- ‚Ç¨49-199/Monat pro Einrichtung
- Schneller Time-to-Market
- Internationale Expansion

**On-Premise Enterprise (B2B):**  
- ‚Ç¨25.000-75.000 Setup + ‚Ç¨5.000/Jahr
- Government/High-Security Clients
- H√∂here Margen

**Hybrid Migration Services:**
- Cloud ‚Üí On-Premise: ‚Ç¨10.000
- On-Premise ‚Üí Cloud: ‚Ç¨5.000
- Recurring Revenue Opportunities